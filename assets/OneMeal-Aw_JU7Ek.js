import{r as l,a as F,u as T,c as k,F as w,d as E,b as C,j as e}from"./index-W696PQ6n.js";import{P as S}from"./Preloader-u9HeYrN-.js";import{M as O}from"./Meal-qNzjdKGC.js";import{H as y}from"./Helmet-SjmFeeWK.js";function R(o,c){const t=o.slice();let n=o.length,s,r;for(;n!==0;)r=Math.floor(Math.random()*n),n--,s=t[n],t[n]=t[r],t[r]=s;return t.slice(0,c)}const L=()=>{const[o,c]=l.useState([]),[t,n]=l.useState(!0),[s,r]=l.useState({}),d=F(),m=T(),{idMeal:h,strMeal:i,strMealThumb:j}=s,f=k.useMediaQuery({query:"(max-width: 768px)"}),p=l.useCallback(R(o.filter(a=>a.idMeal!=h),4),[o]),{addToBasket:I,setTimer:N,setShow:_,clearTimer:x,setLastAdded:u,showAdded:b}=l.useContext(w),M=s.idMeal?s.idMeal.replace("0","5").slice(2):null,g=()=>{b?(x(),u(i)):(_(),u(i)),N(setTimeout(()=>{_(),x()},5e3))};l.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[]),l.useEffect(()=>{E(d.id).then(a=>{a.meals||m("/404"),r(a.meals[0])}).catch(a=>console.log(a)),n(!1)},[d]),l.useEffect(()=>{s.idMeal&&C(s.strCategory).then(a=>{a.meals||m("/404"),c(a.meals)}).catch(a=>console.log(a))},[s]);const v=a=>{a.target.className="mealInfo__btn mealInfo__added",setTimeout(()=>{a.target.className="btn mealInfo__btn"},1e3),g(),I({idMeal:h,strMeal:i,strMealThumb:j,price:M})},A=p.map(a=>e.jsx(O,{...a},a.idMeal));return e.jsxs(e.Fragment,{children:[e.jsxs(y,{children:[e.jsx("meta",{name:"description",content:`FAST FOOD - ${s.strMeal}`}),e.jsx("meta",{name:"keywords",content:`Fast Food, Food store, ${s.strMeal}`}),e.jsx("title",{children:"FAST FOOD - "+s.strMeal})]}),e.jsx("section",{className:"mealInfo",children:e.jsx("div",{className:"container",children:t?e.jsx(S,{}):e.jsxs("div",{className:"mealInfo__wrapper",children:[e.jsxs("div",{className:"mealInfo__card",children:[f?e.jsx("h2",{className:"mealInfo__title title title__black",children:s.strMeal}):null,e.jsx("img",{className:"mealInfo__img",src:s.strMealThumb,alt:s.strMeal}),e.jsxs("div",{className:"mealInfo__card-info",children:[f?null:e.jsx("h2",{className:"title title__black mealInfo__title",children:s.strMeal}),s.strArea?e.jsxs("div",{className:"mealInfo__kitchen",children:[e.jsx("span",{children:"Kitchen:"})," ",s.strArea]}):null,e.jsx("div",{className:"mealInfo__about",children:s.strInstructions}),e.jsxs("div",{className:"mealInfo__price",children:[e.jsx("span",{children:"PRICE:"})," ",M," RUB"]}),e.jsx("button",{className:"mealInfo__btn btn",onClick:a=>v(a),children:"Add to Basket!"})]})]}),e.jsxs("div",{className:"mealInfo__randomForm",children:[e.jsx("div",{className:"mealInfo__titleRandom title title__black",children:"Try other dishes"}),e.jsx("div",{className:"mealInfo__randomCards",children:A})]})]})})})]})};export{L as default};
